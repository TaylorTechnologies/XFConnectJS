<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Error, no device</title>
</head>
<body>
    <div id="selector"></div
    <script src="../xfConnect.js"></script>
    <script src="xfConnect.test.constants.js"></script>
    <script>

        // Unit tests for xfConnect.

        (function () {
            // "it" function defines the test case
            function it(desc, func) {
                //encapsulate the func call in try/catch block so that testing does not stop if one test fails
                try {
                    func();
                    // If the test case passes then log the test case description in the browser console with a checkmark
                    console.log('\x1b[32m%s\x1b[0m', '\u2714 ' + desc);
                } catch (error) {
                    // log the error on the console with an 'x'
                    console.log('\n');
                    console.log('\x1b[31m%s\x1b[0m', '\u2718 ' + desc);
                    console.error(error);
                    console.log('\n');
                }
            }
            // "assert" function checks truth of a statement
            function assert(isTrue) {
                if (!isTrue) {
                    throw new Error();
                }
            }

            // XF test beginS
            // Wait 60 seconds after newtest request to run test
            xfConnect.onError = onXFError;
            function onXFError(error) {
                console.log(error);
                it('should error No Device Connected', () => {
                    s = '';
                    if (error.errorType === "noDeviceError") {
                        s = error.errorMsg;
                    }
                    assert(s === 'Device is not connected');
                });
            }
            xfAbout();
        })();
    </script>
    <h1>Open Browser Developer Tools Console to see results.</h1>
</body>
</html>